tidyverse::tidyverse_packages()
getwd()
sakura <- read.csv("~/R_materials/Kyoto_Flowers.csv")
View(sakura)
# Tidy and Clean ----------------------------------------------------------
# First data point doesn't show until 812 AD... just skip ahead to that.
sakura <- sakura %>% filter(AD %in% 812:2015)
# look at column names
colnames(sakura)
# colnames don't look very neat and tidy...
colnames(sakura) <- sakura %>%
colnames() %>%
str_to_lower() %>%                  # to lower case letters
str_replace_all("\\.", "_")         # replace . with _
colnames(sakura)
# manually rename two of the columns...
colnames(sakura)[1] <- "year"
colnames(sakura)[2] <- "full_flowering_day_of_year"
# remove rows without flowering date
sakura <- sakura %>% filter(!is.na(full_flowering_date))
library(tidyverse)
library(stringr)
library(scales)
sakura <- read.csv("~/R_materials/Kyoto_Flowers.csv")
View(sakura)
# Tidy and Clean ----------------------------------------------------------
# First data point doesn't show until 812 AD... just skip ahead to that.
sakura <- sakura %>% filter(AD %in% 812:2015)
# look at column names
colnames(sakura)
# colnames don't look very neat and tidy...
colnames(sakura) <- sakura %>%
colnames() %>%
str_to_lower() %>%                  # to lower case letters
str_replace_all("\\.", "_")         # replace . with _
colnames(sakura)
# manually rename two of the columns...
colnames(sakura)[1] <- "year"
colnames(sakura)[2] <- "full_flowering_day_of_year"
# remove rows without flowering date
sakura <- sakura %>% filter(!is.na(full_flowering_date))
date_sep <- as.character(sakura$full_flowering_date) %>%
str_replace_all("(.{1})(.*)", "\\1.\\2") %>%            # split into two backreferences on the first digit, then place a .
as.data.frame()
glimpse(date_sep)
colnames(date_sep)[1] <- "date_fl"                        # properly name column
colnames(date_sep)
date_sep <- date_sep %>% separate(date_fl, c("month", "day"), "\\.")    # separate into 'month' and 'day' columns on .
sakura <- bind_cols(date_sep, sakura)   # combine date_sep into sakura
sakura <- sakura %>% select(-full_flowering_date, -full_flowering_day_of_year, -x, -data_type_code, -reference_name, -source_code)  # remove extraneous columns
glimpse(sakura)
sakura <- sakura %>%
mutate(bloom = make_date(year, month, day))
library(lubridate)
sakura <- sakura %>%
mutate(bloom = make_date(year, month, day))
glimpse(sakura)
View(date_sep)
